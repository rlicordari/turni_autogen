name: Keep Streamlit Awake

on:
  schedule:
    # ogni 30 minuti (modifica se vuoi)
    - cron: "*/30 * * * *"
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Streamlit app URL
        env:
          STREAMLIT_APP_URL: ${{ secrets.STREAMLIT_APP_URL }}
        run: |
          if [ -z "$STREAMLIT_APP_URL" ]; then
            echo "Missing secret STREAMLIT_APP_URL"
            exit 1
          fi
          # -L segue eventuali redirect; head riduce output log
          curl -L --max-time 30 --silent --show-error "$STREAMLIT_APP_URL" | head -c 2000
