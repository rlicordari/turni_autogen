version: 2026-02-01-patched-v7
columns:
  C: Reperibilità
  D: UTIC mattina
  E: Cardiologia mattina
  F: Supporto 118
  G: Riabilitazione
  H: UTIC pomeriggio
  I: Cardiologia pomeriggio
  J: Notte
  K: Letto
  L: Padiglioni
  Q: ECO base
  R: ECOSTRESS/ETE/TCD/Cardioncologia
  S: Ecosala
  T: Interni
  U: Contr.PM
  V: Sala PM
  W: Ergometria/CPET
  Y: Ambulatori specialistici
  Z: Vascolare
  AA: SPOC
  AB: Holter/Brugada/FA
  AC: Scintigrafia
  AD: Medici liberi 1
  AE: Medici liberi 2
  AF: Medici liberi 3
  AG: Medici liberi 4
keep_empty_columns:
- M
- N
- O
- P
global_constraints:
  one_column_one_doctor_per_day: true
  daily_uniqueness_exempt_columns:
  - C
  night_off:
    same_day: true
    next_day: true
  night_spacing_days_min: 5
  night_spacing_days_preferred: 7
  min_full_weekends_off_per_month: 2
  weekend_off_exempt:
  - Grimaldi
  - Calabrò
  avoid_weekend_night_concentration: true
  saturday_K_equals_T: false
  weekend_off_soft: true
  weekend_off_penalty: 80
  relief_valves:
    enable_kt_share: true
    kt_share_penalty: 5000
    allow_blank_columns:
      L: 20000
      R: 40000
rules:
  C_reperibilita:
    one_per_day: true
    target_per_doctor: 2
    min_per_doctor: 2
    max_per_doctor: 3
    max_per_doctor_hard: true
    spacing_min_days: 3
    constraints:
    - not_night_same_day
    - not_night_prev_day
    - not_working_same_day_on_sundays_and_holidays
    excluded:
    - Zito
    - Manganaro
    - D'Angelo
    - Recupero
    - De Gregorio
  Festivi:
    pool:
    - De Gregorio
    - Colarusso
    - Cimino
    - Allegra
    - Crea
    - Pugliatti
    - Cusmà
    - Licordari
    - Migliorato
    - Trio
    - Dattilo
    excluded:
    - Grimaldi
    - Calabrò
    - Zito
    notes: 'Per domeniche/festivi: D+E unificati e H+I unificati; usare questo pool.
      Grimaldi/Calabrò/Zito solo raramente (1 ogni 3 mesi) se vuoi abilitarli.

      '
  D_F:
    allowed:
    - Grimaldi
    - Calabrò
    days: Mon-Sat
    pair_rule: D one, F the other (not equal)
    fallback_F_any_free_doctor: false
    monthly_quotas:
      Calabrò_nights: 2
      Calabrò_H_mon_fri: 1
      Grimaldi_H_mon_fri: 2
    pattern_3_3: true
    pattern_conditional_hard: false
    pattern_doc1: Grimaldi
    pattern_doc2: Calabrò
    fallback_from_H_pool: true
    fallback_H_pool_source: H.pool_mon_fri
    enable_df_share: true
    df_share_penalty: 8000
    outside_hpool_penalty: 5000
    pattern_penalty: 80
    fallback_penalty: 200
    outside_pair_penalty: 6000
    missing_pair_doc_penalty: 12000
    d_not_available_penalty: 15000
    prefer_df_share_penalty: 15000
  E_G:
    block_days: 3
    days: Mon-Sat
    allowed:
    - Dattilo
    - Crea
    - Allegra
    - Cimino
    - D'Angelo
    - Pugliatti
    - De Gregorio
    - Manganaro
    block_split_penalty: 500
  I:
    must_be_free_of_other_tasks: true
    not_same_as_E: true
    distribution_pool:
    - Allegra
    - Cimino
    - Dattilo
    - Crea
    - Pugliatti
    - De Gregorio
    balance: true
    balance_weight: 120
    degregorio_max_weekdays: 3
  H:
    monthly_quotas:
      Grimaldi_mon_fri: 2
      Calabrò_mon_fri: 1
    pool_mon_fri:
    - Licordari
    - Colarusso
    - Migliorato
    - Trio
    - Cusmà
    - Manganaro
    cap_mon_fri_per_doctor: 5
    distribution_pool:
    - Licordari
    - Colarusso
    - Migliorato
    - Trio
    - Cusmà
    - Manganaro
    - Grimaldi
    - Calabrò
    balance: true
    balance_weight: 140
    saturday_must_be_covered: true
  J:
    thursday_blank: true
    monthly_quotas:
      Zito: 2
      Calabrò: 2
    weekend_excluded_doctors:
    - Calabrò
    pool_other:
    - Allegra
    - Cimino
    - Colarusso
    - Crea
    - Cusmà
    - Dattilo
    - Licordari
    - Migliorato
    - Pugliatti
    - Trio
  K:
    pool:
    - Allegra
    - Cimino
    - Colarusso
    - Crea
    - Cusmà
    - Licordari
    - Pugliatti
    - Trio
    - Manganaro
    - De Gregorio
    no_consecutive_days_same_doctor: true
    balance: true
  L:
    days:
    - Mon
    - Wed
    - Thu
    quota_recupero_per_month: 3
    pool_other:
    - Allegra
    - Cimino
    - Colarusso
    - Cusmà
    - Licordari
    - Pugliatti
    - Trio
    avoid_close_repeats: true
  Q:
    days: Mon-Sat
    pool:
    - Recupero
    - Colarusso
    - Zito
    - Pugliatti
    - D'Angelo
    - Manganaro
    - Cusmà
    - Licordari
    - Trio
    balance: true
    recupero_max_per_month: 2
  R:
    days: Mon-Fri
    pool:
    - Recupero
    - Colarusso
    - Zito
    - Manganaro
    - Cusmà
    - Licordari
    - Trio
    balance: true
  S:
    day: Tue
    pool:
    - Zito
    - Cusmà
    balance: true
  T:
    days: Mon-Sat
    pool:
    - Pugliatti
    - Colarusso
    - Trio
    - Cimino
    - Allegra
    - Licordari
    - Manganaro
    - D'Angelo
    - Recupero
    balance: true
    recupero_min_per_month: 4
    recupero_target_per_month: 5
    recupero_target_penalty: 2000
  U:
    days:
    - Mon
    - Tue
    pool:
    - Crea
    - D'Angelo
    - Allegra
    - Dattilo
    - Cimino
    cimino_exact_per_month: 2
  V:
    days:
    - Mon
    - Wed
    - Fri
    balance: true
    balance_weight: 120
    pool:
    - Dattilo
    - Crea
    - Allegra
  W:
    tuesday_fixed: Pugliatti
    wednesday_mandatory: true
    other_days_pool:
    - Migliorato
    - Recupero
    - Pugliatti
  Y:
    day: Mon
    recupero_two_mondays_per_month: true
    other_pool:
    - Licordari
    - Colarusso
    - D'Angelo
    recupero_affianca_in_T: true
  Z:
    days:
    - Wed
    - Fri
    pool:
    - De Gregorio
    - Manganaro
    - Cusmà
    - D'Angelo
    - Licordari
    balance: true
    balance_weight: 120
  AA:
    days:
    - Mon
    - Wed
    copy_from:
    - K
    - T
  AB:
    weekly: true
    fixed_day: Thu
    prefer: Crea
    fallback_pool:
    - Dattilo
    - Cimino
    - Allegra
    - D'Angelo
    saturday_per_month: 2
    saturday_only_doctor: Crea
    saturday_soft: true
    saturday_shortfall_penalty: 10000
  AC:
    days:
    - Tue
    - Wed
    fixed: Migliorato
absolute_exclusions:
- De Luca
- Carciotto
- Virga
- Andò
- Saporito
